---
import BaseHead from "../components/BaseHead.astro";
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro'

export interface Props {
    title?: string,
    description?: string
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="zh-CN" data-overlayscrollbars-initialize>
    <head>
        <BaseHead title={title} description={description} />
    </head>

    <body  class="flex flex-col" data-overlayscrollbars-initialize>
        <!-- <Header client:only="vue"/> -->
        <Header/>
        <main class="flex-1">
            <div class="container px-4 mx-auto flex-1 h-full">
                <slot />
            </div>
        </main>
        <Footer />
    </body>
</html>

<script>
import 'overlayscrollbars/overlayscrollbars.css';
import { OverlayScrollbars } from 'overlayscrollbars';

function initCustomScrollbar() {
    OverlayScrollbars(
        {
            target: document.querySelector('body')!,
            cancel: {
                nativeScrollbarsOverlaid: true
            }
        }, {
            scrollbars: {
			    autoHide: 'move',
			    autoHideDelay: 500,
			    autoHideSuspend: false
            }
        }
    );

    document.querySelectorAll('pre').forEach(ele => {
        OverlayScrollbars(ele, {
			scrollbars: {
				autoHide: 'leave',
				autoHideDelay: 500,
				autoHideSuspend: false
			}
		});
    })
}

function init() {
    initCustomScrollbar()
}

init()

document.addEventListener('astro:after-swap', init);

</script>